<!DOCTYPE html>
<html lang="en" class="darker">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=10, user-scalable=1"
    />
    <title>gpa calculator thingy</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="stylesheet" href="https://ehan.dev/ehui/css/colors.css" />
    <link rel="stylesheet" href="https://ehan.dev/ehui/css/components.css" />
    <link rel="stylesheet" href="https://ehan.dev/ehui/css/layouts.css" />
    <link rel="stylesheet" href="https://ehan.dev/ehui/css/utils.css" />
    <link
      rel="stylesheet"
      href="https://www.nerdfonts.com/assets/css/webfont.css"
    />
    <style>
      .customLayout {
        display: grid;
        grid-template-rows: auto auto;
        grid-template-columns: auto auto;
        grid-template-areas:
          "options result"
          "grades result";
        padding: 2rem;
      }
      .customLayout > .options {
        grid-area: options;
      }
      .customLayout > .grades {
        grid-area: grades;
      }
      .customLayout > .result {
        grid-area: result;
      }
      .customSmallTxt {
        width: 6rem;
      }
      .customCombo {
        display: flex;
        gap: 0px;
        align-items: center;
      }
      .customCombo > .left {
        margin-right: 0px;
        margin-bottom: 0px;
        margin-top: 0px;
        border-top-right-radius: 0px;
        border-bottom-right-radius: 0px;
      }
      .customCombo > .mid {
        margin: 0px;
        border-radius: 0px;
      }
      .customCombo > .right {
        margin-left: 0px;
        margin-bottom: 0px;
        margin-top: 0px;
        border-top-left-radius: 0px;
        border-bottom-left-radius: 0px;
      }
    </style>
  </head>
  <body>
    <div class="customLayout">
      <div class="options">
        <div class="customCombo">
          <button id="unweighted" class="left">Unweighted</button>
          <button id="frhsd" class="right alt">FRHSD's weights</button>
        </div>
      </div>
      <div class="grades">
        <table id="gradesTable">
          <thead>
            <tr>
              <th>Course</th>
              <th>Credits</th>
              <th>Grade</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <input type="text" placeholder="Course Name"> <br/>
                <div class="customCombo">
                  <button class="left">Regular</button>
                  <button class="mid alt">Honors</button>
                  <button class="right alt">AP</button>
                </div>
              </td>
              <td>
                <input type="text" class="customSmallTxt" placeholder="5.0">
              </td>
              <td>
                <input type="text" class="customSmallTxt" placeholder="A+">
              </td>
            </tr>
          </tbody>
        </table>
        <div class="flex">
          <button id="addRow">Add Course</button>
          <button id="calc" class="green">Calculate!</button>
        </div>
      </div>
      <div class="result">
        123
      </div>
    </div>
    <script>  
      var tableStuff = {
        insert: function (index) {
          var newRow = document
            .getElementById("gradesTable")
            .insertRow(index);
          newRow.insertCell(0).innerHTML = "<input type='text' placeholder='Course Name'> <br/>"+
            "<div class='customCombo'>"+
            "  <button class='left'>Regular</button>"+
            "  <button class='mid alt'>Honors</button>"+
            "  <button class='right alt'>AP</button>"+
            "</div>";
          newRow.insertCell(1).innerHTML = "<input type='text' class='customSmallTxt' placeholder='5.0'>";
          newRow.insertCell(2).innerHTML = "<input type='text' class='customSmallTxt' placeholder='A+'>";
          /*actions.innerHTML =
            "<div class='flex center'><button> <i class='nf nf-cod-arrow_up'></i> Move Up </button><button> <i class='nf nf-cod-arrow_down'></i> Move Down </button><button class='red'> <i class='nf nf-fa-trash_o'></i> Remove </button></div>";
          actions.children[0].children[0].addEventListener("click", function (event) {
            tableStuff.move(
              event.target.parentElement.parentElement.parentElement.rowIndex,
              event.target.parentElement.parentElement.parentElement.rowIndex - 1,
            );
          });
          actions.children[0].children[1].addEventListener("click", function (event) {
            tableStuff.move(
              event.target.parentElement.parentElement.parentElement.rowIndex,
              event.target.parentElement.parentElement.parentElement.rowIndex + 2,
            );
          });
          actions.children[0].children[2].addEventListener("click", function (event) {
            tableStuff.delete(
              event.target.parentElement.parentElement.parentElement.rowIndex,
            );
          });*/
        },
        add: function () {
          tableStuff.insert(
            document.getElementById("gradesTable").rows.length - 1,
          );
        },
        delete: function (index) {
          document.getElementById("gradesTable").deleteRow(index);
        },
        move: function (index, newIndex) {
          if (
            index !== newIndex &&
            ((index > newIndex && index !== 1) || index < newIndex) &&
            ((index < newIndex &&
              index <
                document.getElementById("gradesTable").rows.length -
                  2) ||
              index > newIndex)
          ) {
            tableStuff.insert(newIndex);
            var newOldIndex;
            if (index > newIndex) {
              newOldIndex = index + 1;
            } else if (index < newIndex) {
              newOldIndex = index;
            }

            document.getElementById("gradesTable").rows[
              newIndex
            ].children[0].children[0].value = document.getElementById(
              "gradesTable"
            ).rows[newOldIndex].children[0].children[0].value;
            tableStuff.delete(newOldIndex);
            if (document.getElementById("gradesTable").rows[
                newOldIndex
              ].children[0].children[2].children[0].classList.contains("alt")) {
              document.getElementById("gradesTable").rows[
                newIndex
              ].children[0].children[2].children[0].classList.add("alt")
            }
            if (document.getElementById("gradesTable").rows[
                newOldIndex
              ].children[0].children[2].children[1].classList.contains("alt")) {
              document.getElementById("gradesTable").rows[
                newIndex
              ].children[0].children[2].children[1].classList.add("alt")
            }
            if (document.getElementById("gradesTable").rows[
                newOldIndex
              ].children[0].children[2].children[2].classList.contains("alt")) {
              document.getElementById("gradesTable").rows[
                newIndex
              ].children[0].children[2].children[2].classList.add("alt")
            }
            document.getElementById("gradesTable").rows[
              newIndex
            ].children[1].children[0].value = document.getElementById(
              "gradesTable"
            ).rows[newOldIndex].children[1].children[0].value;
            tableStuff.delete(newOldIndex);
            document.getElementById("gradesTable").rows[
              newIndex
            ].children[2].children[0].value = document.getElementById(
              "gradesTable"
            ).rows[newOldIndex].children[2].children[0].value;
            tableStuff.delete(newOldIndex);
          }
        },
        makeArrayFromTable: function (element) {
          var tableArray = [];
          for (var i = 1; i < element.rows.length - 1; i++) {
            var row = [];
            var tableCells = element.rows[i].children;
          
            row.push(tableCells[0].children[0].value);
            row.push(tableCells[1].children[0].value);
          
            tableArray.push(row);
          }
          return tableArray;
        },
        makeTableFromArray: function (array, table) {
          for (var i = 0; i < array.length; i++) {
            var row = array[i];
          
            tableStuff.add();
          
            table.rows[i + 1].children[0].children[0].value = row[0];
            table.rows[i + 1].children[1].children[0].value = row[1];
          }
        },
      };
    </script>
    <script>
      var weighted = false;
      var weights = null;
      var frhsdWeights = {
        ap: {
          "A+": 6.1, "A": 5.8, "A-": 5.5,
          "B+": 5.1, "B": 4.8, "B-": 4.5,
          "C+": 4.1, "C": 3.8, "C-": 3.5,
          "D+": 3.1, "D": 2.8,
          "E": 0
        },
        honors: {
          "A+": 5.6, "A": 5.3, "A-": 5,
          "B+": 4.6, "B": 4.3, "B-": 4,
          "C+": 3.6, "C": 3.3, "C-": 3,
          "D+": 2.6, "D": 2.3,
          "E": 0
        },
        "A+": 4.6, "A": 4.3, "A-": 4,
        "B+": 3.6, "B": 3.3, "B-": 3,
        "C+": 2.6, "C": 2.3, "C-": 2,
        "D+": 1.6, "D": 1.3,
        "E": 0
      }
      document.getElementById("unweighted").addEventListener("click",
        function () {
          document.getElementById("unweighted").classList.remove("alt");
          document.getElementById("frhsd").classList.add("alt");
          weighted = false;
        }
      )
      document.getElementById("frhsd").addEventListener("click",
        function () {
          document.getElementById("unweighted").classList.add("alt");
          document.getElementById("frhsd").classList.remove("alt");
          weighted = true;
          weights = frhsdWeights;
        }
      )
      document.getElementById("add").addEventListener("click",
        function () {
          tableStuff.add()
        }
      )
      document.getElementById("calc").addEventListener("click",
        function () {
          console.log("idk")
        }
      )
    </script>
  </body>
</html>
